


<!DOCTYPE HTML>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		<meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		<link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.4382/css/CoveoFullSearch.css"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="description"/>
		<meta name="keywords"/>
		<meta property="og:title" content=""/>
		<meta property="og:description"/>
		<!-- favicon -->
		<link rel="icon" type="image/vnd.microsoft.icon" href="_static/favicon.ico"/>
		<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="_static/favicon.ico"/>
		<!-- Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet" type="text/css"/>







      <script type="text/javascript" src="_static/js/jquery.min.js"></script>
	  <script type="text/javascript" src="_static/js/gtm.js"></script>
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
    <script type="text/javascript" src="_static/js/d3dd8c60ed.js"></script>
    <script type="text/javascript" src="_static/js/common-ui-all.min.js"></script>
    <script type="text/javascript" src="_static/js/header-footer.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="_static/js/CoveoJsSearch.Lazy.min.js"></script>
    <script type="text/javascript" src="_static/js/linkid.js"></script>
    <script type="text/javascript" src="_static/js/Searchbox.min.js"></script>


      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>

    <script type="text/javascript" src="_static/js/theme.js"></script>




  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/common-ui-all.min.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/header-footer.min.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/pro.min.css" media="all" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Developers Guide" href="devguide.html" />
    <link rel="prev" title="Building and Installing the XVSEC Driver Software" href="build.html" />
	</head>
	<body>
		<div class="xilinx-bs3"/>
		<div class="root responsivegrid">
			<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 aem-Grid--large--16 aem-Grid--xlarge--16 aem-Grid--xxlarge--16 aem-Grid--xxxlarge--16 ">
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn aem-GridColumn--default--12">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="header parbase aem-GridColumn aem-GridColumn--default--12">
								<noindex>
									<header data-component="header">
										<nav class="navbar navbar-default aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid main-nav">
													<div class="row">
														<div class="col-xs-12">
															<div class="logo-column">
																<div class="logo">
																	<a href="https://www.xilinx.com/">
																	<img src="https://www.xilinx.com/etc.clientlibs/site/clientlibs/xilinx/all/resources/imgs/header/xilinx-header-logo.svg" title="Xilinx Inc"/>
																	</a>
																</div>
															</div>
															<div class="navbar-column">
																<div class="navbar navbar-collapse collapse" id="xilinx-main-menu">
																	<div class="mobile-search-container">
																		<div id="headerSearchBox" class="headerSearch"
																			data-component="header-search"
																			data-redirect-if-empty="false"
																			data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																			data-coveo-organization-id="xilinxcomprode2rjoqok">
																			<div class='coveo-search-section'>
																				<div class="CoveoAnalytics" data-search-hub="Site"></div>
																				<ul class="dropdown-menu options">
																					<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																						<a href="#">
																						All</a>
																					</li>
																					<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com//products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Silicon Devices</a>
																					</li>
																					<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com//products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Boards and Kits</a>
																					</li>
																					<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com//products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Intellectual Property</a>
																					</li>
																					<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																						<a href="#">
																						Support</a>
																						<ul>
																							<li data-label="Documentation" data-action-link="https://www.xilinx.com//support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																								<a href="#">
																								Documentation</a>
																							</li>
																							<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com//support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																								<a href="#">
																								Knowledge Base</a>
																							</li>
																							<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																								<a href="#">
																								Community Forums</a>
																							</li>
																						</ul>
																					</li>
																					<li data-label="Partners" data-action-link="https://www.xilinx.com//alliance/member-keyword-search.html" data-search-hub="Partner">
																						<a href="#">
																						Partners</a>
																					</li>
																					<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																						<a href="#">
																						Videos</a>
																					</li>
																					<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																						<a href="#">
																						Press</a>
																					</li>
																				</ul>
																				<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																				<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																			</div>
																		</div>
																	</div>
																	<ul class="nav navbar-nav nav-justified">
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/applications.html">
																			Applications</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/products/silicon-devices.html">
																			Products</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://developer.xilinx.com/">
																			Developers</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/support.html">
																			Support</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/about/company-overview.html">
																			About</a>
																		</li>
																	</ul>
																</div>
															</div>
															<script type="text/javascript" src="_static/js/gtm.js"></script>
															<!--<div class="mini-nav">
																<button type="button" data-function="xilinx-mobile-menu" id="nav-toggle" class="navbar-toggle collapsed visible-xs-block" aria-expanded="false">
																<span></span>
																<span></span>
																<span></span>
																<span></span>
																</button>
																<ul class="list-inline">
																	<li class="dropdown user-menu">
																		<button data-toggle="dropdown">
																		<span class="sr-only">Account</span>
																		<span class="fas fa-user"></span>
																		</button>
																		<ul class="dropdown-menu">
																			<li>
																				<a href="https://www.xilinx.com/myprofile/subscriptions.html">
																				My Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/registration/create-account.html">
																				Create Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/bin/protected/en/signout">
																				Sign Out</a>
																			</li>
																		</ul>
																	</li>
																	<li class="hidden-xs">
																		<button data-function="search-toggle">
																		<span class="sr-only">Search</span>
																		<span class="far fa-search"></span>
																		</button>
																	</li>
																</ul>
															</div>
															-->
															<div class="search-container">
																<div id="headerSearchBox" class="headerSearch"
																	data-component="header-search"
																	data-redirect-if-empty="false"
																	data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																	data-coveo-organization-id="xilinxcomprode2rjoqok">
																	<div class='coveo-search-section'>
																		<div class="CoveoAnalytics" data-search-hub="Site"></div>
																		<ul class="dropdown-menu options">
																			<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																				<a href="#">
																				All</a>
																			</li>
																			<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com/products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Silicon Devices</a>
																			</li>
																			<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com/products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Boards and Kits</a>
																			</li>
																			<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com/products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Intellectual Property</a>
																			</li>
																			<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																				<a href="#">
																				Support</a>
																				<ul>
																					<li data-label="Documentation" data-action-link="https://www.xilinx.com/support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																						<a href="#">
																						Documentation</a>
																					</li>
																					<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com/support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																						<a href="#">
																						Knowledge Base</a>
																					</li>
																					<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																						<a href="#">
																						Community Forums</a>
																					</li>
																				</ul>
																			</li>
																			<li data-label="Partners" data-action-link="https://www.xilinx.com/alliance/member-keyword-search.html" data-search-hub="Partner">
																				<a href="#">
																				Partners</a>
																			</li>
																			<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																				<a href="#">
																				Videos</a>
																			</li>
																			<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																				<a href="#">
																				Press</a>
																			</li>
																		</ul>
																		<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																		<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																	</div>
																</div>
																<button data-function="search-toggle">
																<span class="sr-only">Search</span>
																<span class="far fa-times"></span>
																</button>
															</div>
														</div>
													</div>
												</div>
											</div>
										</nav>
									</header>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="parsys aem-GridColumn--xxxlarge--none aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
						<div class="container-fluid">
							<div class="row">
							<div class="col-xs-12">

  <div class="wy-grid-for-nav">

    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >



            <a href="index.html" class="icon icon-home" alt="Documentation Home"> XVSEC Linux Driver



          </a>




              <div class="version">
                2020.2
              </div>




<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div>


        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">






              <p class="caption" role="heading"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="system-requirements.html">System Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="build.html">Building and Installing the XVSEC Driver Software</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">User Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#control-xvsec-through-xvsecctl-application"><strong>Control XVSEC through “xvsecctl” application</strong></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#xvsec-control-application-xvsecctl">XVSEC Control Application (xvsecctl)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#get-the-list-of-vsecs-supported-by-device"><strong>Get the list of VSECs supported by device</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="#generic-xvsecctl-utility-commands"><strong>Generic xvsecctl utility commands</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="#us-us-mcap-specific-options"><strong>US/US+ MCAP Specific Options</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="#versal-mcap-specific-options"><strong>Versal MCAP Specific Options</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="#design-requirements"><strong>Design Requirements</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-usage"><strong>Example usage</strong></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="devguide.html">Developers Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_app.html">User Application</a></li>
</ul>


			<p class="caption"><span class="caption-text">This Page</span></p>
				<ul class="current">
				  <li class="toctree-l1"><a href="_sources/userguide.rst.txt"
						rel="nofollow">Show Source</a></li>
				</ul>

        </div>

      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">


      <nav class="wy-nav-top" aria-label="top navigation">

          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">XVSEC Linux Driver</a>

      </nav>


      <div class="wy-nav-content">

        <div class="rst-content">

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">

      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>

      <li>User Guide</li>


      <li class="wy-breadcrumbs-aside">


            <a href="_sources/userguide.rst.txt" rel="nofollow"> View page source</a>


      </li>

  </ul>


  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">

  <section id="user-guide">
<span id="userguide"></span><h1>User Guide<a class="headerlink" href="#user-guide" title="Permalink to this heading">¶</a></h1>
<p>This section describes the details on usage of the XVSEC IP</p>
<section id="control-xvsec-through-xvsecctl-application">
<h2><strong>Control XVSEC through “xvsecctl” application</strong><a class="headerlink" href="#control-xvsec-through-xvsecctl-application" title="Permalink to this heading">¶</a></h2>
<p>XVSEC SW includes a command-line utility called <code class="docutils literal notranslate"><span class="pre">xvsecctl</span></code> to manage the driver which gets built with driver and allows controlling of vendor specific functionality.</p>
<p>It supports the following functionalities</p>
<ul class="simple">
<li><dl class="simple">
<dt>Generic VSEC functionality</dt><dd><ul>
<li><p>Lists the supported VSECs by the device</p></li>
<li><p>Verbose information about the device</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>The following MCAP operations supported for US/US+ devices</dt><dd><ul>
<li><p>Configuration Logic Reset</p></li>
<li><p>MCAP Module Reset</p></li>
<li><p>Full Reset (Both Configuration Logic and MCAP Module Reset)</p></li>
<li><p>List MCAP Read Data Registers</p></li>
<li><p>List MCAP Register set</p></li>
<li><p>List FPGA Configuration Register set</p></li>
<li><p>Access(Read/Write) any MCAP register by providing offset</p></li>
<li><p>Access(Read/Write) any FPGA configuration register by providing register number</p></li>
<li><p>Program partial clear bitstream</p></li>
<li><p>Program Stage-2/partial reconfigurable bitstream</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>The following MCAP operations supported for Versal devices</dt><dd><ul>
<li><p>MCAP Module Reset</p></li>
<li><p>List MCAP Register set</p></li>
<li><dl class="simple">
<dt>File Download at user specified address</dt><dd><ul>
<li><p>Fixed Address download for FIFO devices</p></li>
<li><p>Increment Address download</p></li>
<li><p>32b mode download for 32b supported devices</p></li>
<li><p>128b mode download for 128b suppported devices</p></li>
<li><p>Slow and Fast download mode supported</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>File Upload from user specified address</dt><dd><ul>
<li><p>Fixed Address upload for FIFO devices</p></li>
<li><p>Increment Address upload</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>Access(Read/Write) any MCAP register by providing offset</p></li>
<li><p>Access(Read/Write) any Device register connected to AXI bus by providing address</p></li>
<li><p>Set the AXI cache and protections bits</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>For help run</dt><dd><ul>
<li><p>xvsecctl -h</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>Refer to <a class="reference internal" href="user_app.html#usr-app"><span class="std std-ref">User Application</span></a> for command options for all supported options by application tool</p></li>
</ul>
<p>This version of the driver has the following limitation: <strong>Only MCAP VSEC is supported</strong></p>
<p>Some MCAP functional usecases supported by xvsecctl application are given below</p>
<section id="xvsec-control-application-xvsecctl">
<h3>XVSEC Control Application (xvsecctl)<a class="headerlink" href="#xvsec-control-application-xvsecctl" title="Permalink to this heading">¶</a></h3>
<section id="get-the-list-of-vsecs-supported-by-device">
<h4><strong>Get the list of VSECs supported by device</strong><a class="headerlink" href="#get-the-list-of-vsecs-supported-by-device" title="Permalink to this heading">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li><p>List the devices using lspci to cross check the devices are detected as PCIe devices</p></li>
<li><p>login with root credentials and execute the below command to list the devices.</p></li>
</ul>
</div></blockquote>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[xilinx@] # lspci | grep -i Xilinx

65:00.0 Serial controller: Xilinx Corporation Device 9034
</pre></div>
</div>
</section>
<section id="generic-xvsecctl-utility-commands">
<h4><strong>Generic xvsecctl utility commands</strong><a class="headerlink" href="#generic-xvsecctl-utility-commands" title="Permalink to this heading">¶</a></h4>
<p><strong>1. List XVSEC Capabilities</strong></p>
<p>command: <code class="docutils literal notranslate"><span class="pre">xvsecctl</span> <span class="pre">-b</span> <span class="pre">&lt;bus_no&gt;</span> <span class="pre">-F</span> <span class="pre">&lt;dev_no&gt;</span> <span class="pre">-l</span></code></p>
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt>b &lt;bus_no&gt;:</dt><dd><ul class="simple">
<li><p>Specify PCI bus no on which device sits</p></li>
</ul>
</dd>
<dt>F &lt;dev_no&gt;:</dt><dd><ul class="simple">
<li><p>Specify PCI device no on the bus</p></li>
</ul>
</dd>
</dl>
<p>Description:
Lists the supported VSECs</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[xilinx@]# ./xvsecctl -b 0x65 -F 0x0 -l

No of Supported Extended capabilities : 3
VSEC ID         VSEC Rev        VSEC Name       Driver Support
-------         --------        ---------       --------------
0x0001          0x0001          PCIe_MCAP_VSEC          Yes
0x0000          0x0000          UNKNOWN                 No
0x0008          0x0000          PCIe_XVC_DEBUG_VSEC     No
</pre></div>
</div>
<p><strong>2. Lists basic information about the device</strong></p>
<p>command: <code class="docutils literal notranslate"><span class="pre">./xvsecctl</span> <span class="pre">-b</span> <span class="pre">&lt;bus_no&gt;</span> <span class="pre">-F</span> <span class="pre">&lt;dev_no&gt;</span> <span class="pre">-v</span></code></p>
<p>Description:
Prints Verbose Information of the given device.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[xilinx@]# ./xvsecctl -b 0x65 -F 0x0 -v

Xilinx VSEC Tool        : v2020.2.0
Xilinx VSEC Library     : v2020.2.0
-----------------------------------
vendor_id        = 0x10EE
device_id        = 0xB03F
device_no        = 0x0
device_fn        = 0x0
subsystem_vendor = 0x10EE
subsystem_device = 0x7
class_id         = 0x5800
cfg_size         = 0x1000
is_msi_enabled   = 0x0
is_msix_enabled  = 0x0
</pre></div>
</div>
</section>
<section id="us-us-mcap-specific-options">
<h4><strong>US/US+ MCAP Specific Options</strong><a class="headerlink" href="#us-us-mcap-specific-options" title="Permalink to this heading">¶</a></h4>
<p><strong>1. MCAP Reset</strong></p>
<p>command: <code class="docutils literal notranslate"><span class="pre">./xvsecctl</span> <span class="pre">-b</span> <span class="pre">&lt;bus_no&gt;</span> <span class="pre">-F</span> <span class="pre">&lt;dev_no&gt;</span> <span class="pre">-c</span> <span class="pre">0x1</span> <span class="pre">-r</span></code></p>
<p>Description:
It Performs Simple Reset.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[xilinx@]# ./xvsecctl -b 0x08 -F 0x0 -c 0x1 -r

MCAP version: 1
Configuration Logic Reset Successful
</pre></div>
</div>
<p><strong>2. MCAP Module Reset</strong></p>
<p>command: <code class="docutils literal notranslate"><span class="pre">./xvsecctl</span> <span class="pre">-b</span> <span class="pre">&lt;bus_no&gt;</span> <span class="pre">-F</span> <span class="pre">&lt;dev_no&gt;</span> <span class="pre">-c</span> <span class="pre">0x1</span> <span class="pre">-m</span></code></p>
<p>Description:
Performs Module Reset.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[xilinx@]# ./xvsecctl -b 0x08 -F 0x0 -c 0x1 -m

MCAP version: 1
MCAP Module Reset Successful
</pre></div>
</div>
<p><strong>3. MCAP Full Reset</strong></p>
<p>command: <code class="docutils literal notranslate"><span class="pre">./xvsecctl</span> <span class="pre">-b</span> <span class="pre">&lt;bus_no&gt;</span> <span class="pre">-F</span> <span class="pre">&lt;dev_no&gt;</span> <span class="pre">-c</span> <span class="pre">0x1</span> <span class="pre">-f</span></code></p>
<p>Description:
This command Performs Full Reset. It is equivalent to MCAP Simpale Reset + MCAP Module Reset.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[xilinx@]# sudo ./xvsecctl -b 0x08 -F 0x0 -c 0x1 -f

MCAP version: 1
Both Configuration Logic &amp; MCAP Module Reset Successful
</pre></div>
</div>
<p><strong>4. Lists Data register Contents</strong></p>
<p>command: <code class="docutils literal notranslate"><span class="pre">./xvsecctl</span> <span class="pre">-b</span> <span class="pre">&lt;bus_no&gt;</span> <span class="pre">-F</span> <span class="pre">&lt;dev_no&gt;</span> <span class="pre">-c</span> <span class="pre">0x1</span> <span class="pre">-D</span></code></p>
<p>Description:
Reads and prints MCAP Data Registers.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[xilinx@]# sudo ./xvsecctl -b 0x08 -F 0x0 -c 0x1 -D

MCAP version: 1
BYTE OFFSET     Register Name           Data Value
-----------     ----------------        ----------
0x001C          FPGA Read Data[0]       0x00000000
0x0020          FPGA Read Data[1]       0x00000000
0x0024          FPGA Read Data[2]       0x00000000
0x0028          FPGA Read Data[3]       0x00000000
</pre></div>
</div>
<p><strong>5. Lists MCAP Register Contents</strong></p>
<p>command: <code class="docutils literal notranslate"><span class="pre">./xvsecctl</span> <span class="pre">-b</span> <span class="pre">&lt;bus_no&gt;</span> <span class="pre">-F</span> <span class="pre">&lt;dev_no&gt;</span> <span class="pre">-c</span> <span class="pre">0x1</span> <span class="pre">-d</span></code></p>
<p>Description:
It Dumps all the MCAP config Registers.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[xilinx@]# ./xvsecctl -b 0x08 -F 0x0 -c 0x1 -d

MCAP version: 1
BYTE OFFSET     Register Name           Data Value
-----------     ----------------        ----------
0x0000          Ext Capability          0x4801000B
0x0004          VSEC Header             0x02C10001
0x0008          FPGA JTAG ID            0x14B31093
0x000C          FPGA BitStream Ver      0x00000000
0x0010          Status                  0x00000004
   bit  0       MCAP Error                       0
   bit  1       MCAP EOS                         0
   bit  4       MCAP Read Complete               0
   bit 5:7      MCAP Read Count                  0
   bit  8       MCAP FIFO Overflow               0
   bit 12:15    MCAP FIFO Occupancy              0
   bit 24       Req for MCAP Release             0
0x0014          Control                 0x00001000
   bit  0       MCAP Enable                      0
   bit  1       MCAP Read Enable                 0
   bit  4       MCAP Reset                       0
   bit  5       MCAP Module Reset                0
   bit  8       Req for MCAP by PCIe             0
   bit 12       MCAP Design Switch               1
   bit 16       Write Data Reg Enable            0
0x0018          FPGA Write Data         0x00000000
0x001C          FPGA Read Data[0]       0x0000000B
0x0020          FPGA Read Data[1]       0x00000000
0x0024          FPGA Read Data[2]       0x00000000
0x0028          FPGA Read Data[3]       0x00000000
</pre></div>
</div>
<p><strong>6. Lists FPGA Config Reg Dump</strong></p>
<p>command: <code class="docutils literal notranslate"><span class="pre">./xvsecctl</span> <span class="pre">-b</span> <span class="pre">&lt;bus_no&gt;</span> <span class="pre">-F</span> <span class="pre">&lt;dev_no&gt;</span> <span class="pre">-c</span> <span class="pre">0x1</span> <span class="pre">-o</span></code></p>
<p>Description:
Reads and prints all FPGA Config Registers.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[xilinx@]# ./xvsecctl -b 0x08 -F 0x0 -c 0x1 -o

MCAP version: 1
FPGA CFG Registers Dump (see Configuration User Guide for more details)

Register No     Register Name           Data Value
-----------     ----------------        ----------
0x0000          crc                     0x00000000
0x0001          far                     0x07FC0000
0x0002          fdri                    0x00000000
0x0003          fdro                    0x00000000
0x0004          cmd                     0x00000000
0x0005          ctl0                    0x00000401
0x0006          mask                    0x00000000
0x0007          stat                    0x109079FC
0x0008          lout                    0x00000000
0x0009          cor0                    0x38003FE5
0x000A          mfwr                    0x00000000
0x000B          cbc                     0x00000000
0x000C          idcode                  0x14B31093
0x000D          axss                    0x00000000
0x000E          cor1                    0x00400000
0x0010          wbstar                  0x00000000
0x0011          timer                   0x00000000
0x0014          scratchpad              0x00000000
0x0016          bootsts                 0x00000001
0x0018          ctl1                    0x00000000
0x001F          bspi                    0x0000000B
</pre></div>
</div>
<p><strong>7. Access the MCAP Registers</strong></p>
<p>command: <code class="docutils literal notranslate"><span class="pre">./xvsecctl</span> <span class="pre">-b</span> <span class="pre">&lt;bus_no&gt;</span> <span class="pre">-F</span> <span class="pre">&lt;dev_no&gt;</span> <span class="pre">-c</span> <span class="pre">0x1</span> <span class="pre">-a</span> <span class="pre">&lt;byte</span> <span class="pre">offset&gt;</span> <span class="pre">[type</span> <span class="pre">[data]]</span></code></p>
<p>Description:
This command is used to read/write the MCAP config Register.</p>
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt>&lt;byte offset&gt;:</dt><dd><ul class="simple">
<li><p>MCAP register offset</p></li>
</ul>
</dd>
<dt>[type[data]]:</dt><dd><ul class="simple">
<li><p>Write operation with data</p></li>
<li><p>b for byte data [8 bits] read</p></li>
<li><p>h for half word data [16 bits] read</p></li>
<li><p>w for word data [32 bits] read</p></li>
</ul>
</dd>
</dl>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>1) Read MCAP register
---------------------
[xilinx@]# ./xvsecctl -b 0x08 -F 0x0 -c 0x1 -a 0x4 w

MCAP version: 1
[XVSEC] : xvsec_mcap_access_config_reg : read operation completed
BYTE OFFSET     Register Name           Data Value
-----------     ----------------        ----------
0x0004          VSEC Header             0x02C10001

2) Write MCAP register
----------------------
[xilinx@]# ./xvsecctl -b 0x08 -F 0x0 -c 0x1 -a 0x14 w 0x10000

MCAP version: 1
[XVSEC] : xvsec_mcap_access_config_reg : write operation completed
BYTE OFFSET  Register Name           Data Value
-----------  ----------------        ----------
0x0014               Control             0x00010000
</pre></div>
</div>
<p><strong>8. Access FPGA Config Registers</strong></p>
<p>command: <code class="docutils literal notranslate"><span class="pre">./xvsecctl</span> <span class="pre">-b</span> <span class="pre">&lt;bus_no&gt;</span> <span class="pre">-F</span> <span class="pre">&lt;dev_no&gt;</span> <span class="pre">-c</span> <span class="pre">0x1</span> <span class="pre">-s</span> <span class="pre">&lt;register</span> <span class="pre">no&gt;</span> <span class="pre">[w</span> <span class="pre">[data]]</span></code></p>
<p>Description:
This command is used to read/write the FPGA config Register.</p>
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt>&lt;register no&gt;:</dt><dd><ul class="simple">
<li><p>FPGA register offset</p></li>
</ul>
</dd>
<dt>[w [data]]:</dt><dd><ul class="simple">
<li><p>Write operation with data</p></li>
<li><p>Read Operation if ‘w’ not given</p></li>
</ul>
</dd>
</dl>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>1) Read FPGA config register
----------------------------
[xilinx@]# ./xvsecctl -b 0x08 -F 0x0 -c 0x1 -s 0x14

MCAP version: 1
[XVSEC] : xvsec_mcap_access_fpga_config_reg : read operation completed
Register No     Register Name           Data Value
-----------     ----------------        ----------
0x0014          scratchpad              0x00000000

2) Write FPGA config register
----------------------------
[xilinx@]# ./xvsecctl -b 0x08 -F 0x0 -c 0x1 -s 0x14 w 0xDEADBEEF
MCAP version: 1
In -s option
[XVSEC] : xvsec_mcap_access_fpga_config_reg : write operation completed
Register No     Register Name           Data Value
-----------     ----------------        ----------
0x0014          scratchpad              0xDEADBEEF
</pre></div>
</div>
<p><strong>9. Program Stage 2 Bit-stream(.bin/.bit/.rbt)</strong></p>
<p>command: <code class="docutils literal notranslate"><span class="pre">./xvsecctl</span> <span class="pre">-b</span> <span class="pre">&lt;bus_no&gt;</span> <span class="pre">-F</span> <span class="pre">&lt;dev_no&gt;</span> <span class="pre">-c</span> <span class="pre">0x1</span> <span class="pre">-p</span> <span class="pre">&lt;file&gt;</span></code></p>
<p>Description:
Programs Stage 2 Bitstream into FPGA. Supported file extentions are <a href="#id1"><span class="problematic" id="id2">*</span></a>.bin, <a href="#id3"><span class="problematic" id="id4">*</span></a>.bit, <a href="#id5"><span class="problematic" id="id6">*</span></a>.rbt.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[xilinx@]# ./xvsecctl -b 0x08 -F 0x0 -c 0x1 -p Tul_Des03_tfu_update_region_partial.bit

MCAP version: 1
[XVSEC] : xvsec_mcap_configure_fpga : Bitstream Program successful
FPGA configuration successful
</pre></div>
</div>
</section>
<section id="versal-mcap-specific-options">
<h4><strong>Versal MCAP Specific Options</strong><a class="headerlink" href="#versal-mcap-specific-options" title="Permalink to this heading">¶</a></h4>
</section>
<section id="design-requirements">
<h4><strong>Design Requirements</strong><a class="headerlink" href="#design-requirements" title="Permalink to this heading">¶</a></h4>
<p>The capability to load reconfigurable, partial bitstreams for DFX regions in the PL or Stage 2 bitstreams to employ the Tandem PCIe boot methodology via the combined hardware and software solution of the Xilinx MCAP for Versal devices is carried over from Ultrascale/Ultrascale+ devices, but differs significantly from previous generations.  While Ultrascale/Ultrascale+ devices had a dedicated connection to the configuration engine, Versal devices access the configuration engine via a generic connection to the NOC.  This means that there are design requirements that must be followed to enable the MCAP feature for Versal devices and successfully use the MCAP VSEC software.  For detailed information, refer to PG346 or PG347, but the design requirements are listed here for brevity.</p>
<ol class="arabic">
<li><p>Enable the MCAP capability and the “CPM to NOC” port via the CIPS GUI’s CPM module in the block design</p></li>
<li><p>Enable the “NOC to PMC” port via the CIPS GUI’s PS PMC module in the block design</p></li>
<li><p>Instantiate the AXI NOC IP and connect the CPM master to the PMC slave in the BD</p></li>
<li><p>Assume the CPM master connects to the AXI NOC’s S00_AXI port and the PMC slave connects to the AXI NOC’s M00_AXI port.  Issue the following configuration TCL command.</p>
<blockquote>
<div><ol class="loweralpha simple">
<li><p>set_property CONFIG.REMAPS {M00_AXI {{0xF122_0000 0x1_0122_0000 64K} {0xF210_0000 0x1_0210_0000 64K}}} [get_bd_intf_pins /axi_noc_0/S00_AXI]</p></li>
</ol>
</div></blockquote>
</li>
<li><p>Using the IPI Address Editor tab, assign the pspmc_0_psv_pmc_slave_boot_stream and the pspmc_0_psv_pmc_slave_boot PMC slaves to the CPM master</p>
<blockquote>
<div><ol class="loweralpha simple">
<li><p>assign_bd_address -offset 0xF1220000 -range 0x00010000 -target_address_space [get_bd_addr_spaces versal_cips_0/CPM_PCIE_NOC_0] [get_bd_addr_segs versal_cips_0/NOC_PMC_AXI_0/pspmc_0_psv_pmc_slave_boot] -force</p></li>
<li><p>assign_bd_address -offset 0xF2100000 -range 0x00010000 -target_address_space [get_bd_addr_spaces versal_cips_0/CPM_PCIE_NOC_0] [get_bd_addr_segs versal_cips_0/NOC_PMC_AXI_0/pspmc_0_psv_pmc_slave_boot_stream] -force</p></li>
</ol>
</div></blockquote>
</li>
</ol>
</section>
<section id="example-usage">
<h4><strong>Example usage</strong><a class="headerlink" href="#example-usage" title="Permalink to this heading">¶</a></h4>
<p><strong>1. MCAP Module Reset</strong></p>
<p>command: <code class="docutils literal notranslate"><span class="pre">./xvsecctl</span> <span class="pre">-b</span> <span class="pre">&lt;bus_no&gt;</span> <span class="pre">-F</span> <span class="pre">&lt;dev_no&gt;</span> <span class="pre">-c</span> <span class="pre">0x1</span> <span class="pre">-m</span></code></p>
<p>Description:
It Performs MCAP Module Reset.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[xilinx@]# ./xvsecctl -b 0x01 -F 0 -c 1 -m

MCAP version: 2
MCAP Module Reset Successful
</pre></div>
</div>
<p><strong>2. Lists MCAP Register Contents</strong></p>
<p>command: <code class="docutils literal notranslate"><span class="pre">./xvsecctl</span> <span class="pre">-b</span> <span class="pre">&lt;bus_no&gt;</span> <span class="pre">-F</span> <span class="pre">&lt;dev_no&gt;</span> <span class="pre">-c</span> <span class="pre">0x1</span> <span class="pre">-d</span></code></p>
<p>Description:
It will print the contents of the MCAP Registers.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[xilinx@]# ./xvsecctl -b 0x01 -F 0 -c 1 -d

MCAP version: 2
BYTE OFFSET     Register Name           Data Value
-----------     ----------------        ----------
0x0000          Ext Capability          0x3A01000B
0x0004          VSEC Header             0x02020001
0x0008          Status                  0x01800000
   bit 5:4      MCAP Read/Write Status           0
   bit  8       MCAP Read Complete               0
   bit 20:16    MCAP FIFO Occupancy              0
   bit 21       MCAP Write FIFO Full             0
   bit 22       Write FIFO Almost Full           0
   bit 23       Write FIFO Almost Empty          1
   bit 24       MCAP Write FIFO Empty            1
   bit 25       Write FIFO Overflow              0
0x000C          Control                 0x00000000
   bit  0       MCAP Read Enable                 0
   bit  4       MCAP Write Enable                0
   bit  5       MCAP 128-bit Mode                0
   bit  8       MCAP Reset                       0
   bit  19:16   MCAP AXI Cache                   0
   bit  22:20   MCAP AXI Protect                 0
0x0010          MCAP RW Adrr register   0x00000000
0x0014          MCAP Write Data         0x00000000
0x0018          MCAP Read Data          0x00000000
</pre></div>
</div>
<p><strong>3. PDI Download</strong></p>
<p>command: <code class="docutils literal notranslate"><span class="pre">./xvsecctl</span> <span class="pre">-b</span> <span class="pre">&lt;bus_no&gt;</span> <span class="pre">-F</span> <span class="pre">&lt;dev_no&gt;</span> <span class="pre">-c</span> <span class="pre">0x1</span> <span class="pre">-p</span> <span class="pre">mode</span> <span class="pre">&lt;32b/128b&gt;</span> <span class="pre">type</span> <span class="pre">&lt;fixed/incr&gt;</span> <span class="pre">&lt;Address&gt;</span> <span class="pre">&lt;PDI</span> <span class="pre">File&gt;</span> <span class="pre">[tr_mode</span> <span class="pre">&lt;slow/fast&gt;]</span> <span class="pre">[sbi</span> <span class="pre">&lt;SBI</span> <span class="pre">reg</span> <span class="pre">block</span> <span class="pre">addr&gt;]</span></code></p>
<p>Description:
This command is used to Download the specified File (.pdi) at given address.</p>
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt>mode</dt><dd><ul class="simple">
<li><p>&lt;32b&gt;: 32-bit mode should be used</p></li>
<li><p>&lt;128b&gt;: 128-bit mode should be used</p></li>
</ul>
</dd>
<dt>type</dt><dd><ul class="simple">
<li><p>&lt;fixed&gt;: Address is fixed</p></li>
<li><p>&lt;incr&gt;: Address should be incremented based on specified mode</p></li>
</ul>
</dd>
<dt>&lt;Address&gt;</dt><dd><ul class="simple">
<li><p>Address to be used for PDI download</p></li>
</ul>
</dd>
<dt>&lt;PDI File&gt;</dt><dd><ul class="simple">
<li><p>PDI file to be downloaded</p></li>
</ul>
</dd>
<dt>[tr_mode ]</dt><dd><ul class="simple">
<li><p>optional slow/fast download mode option for data transfer</p></li>
<li><p>If tr_mode is not specified, It will use Default(fast) mode</p></li>
</ul>
</dd>
<dt>[sbi ]</dt><dd><ul class="simple">
<li><p>Slave Boot Interface register address, If the target is an SBI device</p></li>
</ul>
</dd>
</dl>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>1) Slow mode example: 32b, incr mode with DDR at address 0x0
------------------------------------------------------------
[xilinx@]# ./xvsecctl -b 0x01 -F 0x0 -c 0x1 -p mode 32b type incr 0x0 ./design_routed_tandem_off_rp_1_partial.pdi tr_mode slow

MCAP version: 2
tr_mode: 0
[XVSEC] : xvsec_mcap_file_download : File Download successful
File Download successful

2) Fast mode example: 128b, incr mode with DDR at address 0x0
-------------------------------------------------------------
[xilinx@]# ./xvsecctl -b 0x01 -F 0x0 -c 0x1 -p mode 128b type incr 0x0 ./design_routed_tandem_off_rp_1_partial.pdi tr_mode fast

MCAP version: 2
tr_mode: 1
[XVSEC] : xvsec_mcap_file_download : File Download successful
File Download successful

3) Slow mode example: 128b, fixed mode with SBI fixed address 0xF2100000
------------------------------------------------------------------------
[xilinx@]# ./xvsecctl -b 0x01 -F 0x0 -c 0x1 -p mode 128b type fixed 0xF2100000 ./design_routed_tandem_off_rp_1_partial.pdi tr_mode slow

MCAP version: 2
tr_mode: 1
[XVSEC] : xvsec_mcap_file_download : File Download successful
File Download successful

4) SBI register example: 128b, fixed mode with SBI fixed address 0xF2100000 and SBI register address 0x1220000
-----------------------------------------------------------------------------------------------------------
[xilinx@]# ./xvsecctl -b 0x01 -F 0x0 -c 0x1 -p mode 128b type fixed 0xF2100000 ./design_routed_tandem_off_rp_1_partial.pdi tr_mode slow sbi 0x1220000

MCAP version: 2
tr_mode: 1
[XVSEC] : xvsec_mcap_file_download : File Download successful
</pre></div>
</div>
<p><strong>4. PDI Upload</strong></p>
<p>command: <code class="docutils literal notranslate"><span class="pre">./xvsecctl</span> <span class="pre">-b</span> <span class="pre">&lt;bus_no&gt;</span> <span class="pre">-F</span> <span class="pre">&lt;dev_no&gt;</span> <span class="pre">-c</span> <span class="pre">0x1</span> <span class="pre">-t</span> <span class="pre">type</span> <span class="pre">&lt;fixed/incr&gt;</span> <span class="pre">&lt;Address&gt;</span> <span class="pre">&lt;Length_2_Read&gt;</span> <span class="pre">&lt;PDI</span> <span class="pre">File&gt;</span></code></p>
<p>Description:
It Reads the contents at given address for the given length into given file</p>
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt>type</dt><dd><ul class="simple">
<li><p>&lt;fixed&gt;: Address is fixed</p></li>
<li><p>&lt;incr&gt;: Address should be incremented based on specified mode</p></li>
</ul>
</dd>
<dt>&lt;Address&gt;</dt><dd><ul class="simple">
<li><p>Address to Read the contents</p></li>
</ul>
</dd>
<dt>&lt;Length_2_Read&gt;</dt><dd><ul class="simple">
<li><p>Number of bytes to read</p></li>
</ul>
</dd>
<dt>&lt;PDI File&gt;</dt><dd><ul class="simple">
<li><p>Read the contents and save in given file</p></li>
</ul>
</dd>
</dl>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>1) PDI upload with incr mode and DDR at address 0x0
------------------------------------------------------------
[xilinx@]# ./xvsecctl -b 0x01 -F 0 -c 1 -t type incr 0x0 843312 ./read_from_ddr_32bit_incr.pdi

MCAP version: 2
[XVSEC] : xvsec_mcap_file_upload : File Upload successful
File Upload successful
</pre></div>
</div>
<p><strong>5. Access MCAP Register</strong></p>
<p>command: <code class="docutils literal notranslate"><span class="pre">./xvsecctl</span> <span class="pre">-b</span> <span class="pre">&lt;bus_no&gt;</span> <span class="pre">-F</span> <span class="pre">&lt;dev_no&gt;</span> <span class="pre">-c</span> <span class="pre">0x1</span> <span class="pre">-a</span> <span class="pre">&lt;Reg</span> <span class="pre">Offset&gt;</span> <span class="pre">&lt;b/h/w&gt;</span> <span class="pre">&lt;Data&gt;</span></code></p>
<p>Description:
This command is used to read/write the MCAP config Register.</p>
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt>&lt;byte offset&gt;:</dt><dd><ul class="simple">
<li><p>MCAP register offset</p></li>
</ul>
</dd>
<dt>[type[data]]:</dt><dd><ul class="simple">
<li><p>Write operation with data</p></li>
<li><p>b for byte data [8 bits] read</p></li>
<li><p>h for half word data [16 bits] read</p></li>
<li><p>w for word data [32 bits] read</p></li>
</ul>
</dd>
</dl>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>1) Read MCAP register
---------------------
[xilinx@]# ./xvsecctl -b 0x01 -F 0 -c 1 -a 0xc w

MCAP version: 2
[XVSEC] : xvsec_mcap_access_config_reg : read operation completed
BYTE OFFSET     Register Name           Data Value
-----------     ----------------        ----------
0x000C          Control                 0x00000000

2) Write MCAP register
----------------------
[xilinx@]# ./xvsecctl -b 0x01 -F 0 -c 1 -a 0xc w 0x0010

MCAP version: 2
[XVSEC] : xvsec_mcap_access_config_reg : write operation completed
BYTE OFFSET     Register Name           Data Value
-----------     ----------------        ----------
0x000C          Control                 0x00000010
</pre></div>
</div>
<p><strong>6. Access the AXI Registers</strong></p>
<p>command: <code class="docutils literal notranslate"><span class="pre">./xvsecctl</span> <span class="pre">-b</span> <span class="pre">&lt;bus_no&gt;</span> <span class="pre">-F</span> <span class="pre">&lt;dev_no&gt;</span> <span class="pre">-c</span> <span class="pre">0x1</span> <span class="pre">-x</span> <span class="pre">mode</span> <span class="pre">&lt;32b/128b&gt;</span> <span class="pre">&lt;address&gt;</span> <span class="pre">w</span> <span class="pre">&lt;data&gt;</span></code></p>
<p>Description:
This command is used to read/write the 32b/128b AXI addresses.</p>
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt>mode</dt><dd><ul class="simple">
<li><p>&lt;32b&gt;: 32-bit mode should be used</p></li>
<li><p>&lt;128b&gt;: 128-bit mode should be used</p></li>
<li><p>Mode is Not valid for Read Operation</p></li>
</ul>
</dd>
<dt>&lt;Address&gt;</dt><dd><ul class="simple">
<li><p>Address to be used for PDI download</p></li>
</ul>
</dd>
<dt>[w [data]]</dt><dd><ul class="simple">
<li><p>Write operation with data</p></li>
<li><p>Read Operation if ‘w’ not given</p></li>
</ul>
</dd>
</dl>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>1) 32bit AXI read
-----------------
[xilinx@]# ./xvsecctl -b 0x01 -F 0 -c 1 -x 0xf11a0008

MCAP version: 2
[XVSEC] : xvsec_mcap_access_axi_reg : read operation completed
axi address:    Data Value
------------    ----------
0xF11A0008:     0x00000000

2) 32-bit AXI write
-------------------
[xilinx@]# ./xvsecctl -b 0x01 -F 0 -c 1 -x mode 32b 0xf11a0008 w 0x00302021

MCAP version: 2
[XVSEC] : xvsec_mcap_access_axi_reg : write operation completed
axi address:    Data Value
------------    ----------
0xF11A0008:     0x00302021

3) 128b AXI write
-----------------
[xilinx@]# ./xvsecctl -b 0x01 -F 0 -c 1 -x mode 128b 0x0 w 0xA0000000 0xB1000000 0xC2000000 0xF10000FF

MCAP version: 2
[XVSEC] : xvsec_mcap_access_axi_reg : write operation completed
axi address:    Data Value
------------    ----------
0x00000000:     0xA0000000
0x00000004:     0xB1000000
0x00000008:     0xC2000000
0x0000000C:     0xF10000FF
</pre></div>
</div>
<p><strong>7. To set AXI cache and protection settings</strong></p>
<p>command: <code class="docutils literal notranslate"><span class="pre">./xvsecctl</span> <span class="pre">-b</span> <span class="pre">&lt;bus_no&gt;</span> <span class="pre">-F</span> <span class="pre">&lt;dev_no&gt;</span> <span class="pre">-c</span> <span class="pre">0x1</span> <span class="pre">[axi_cache</span> <span class="pre">&lt;data&gt;</span> <span class="pre">axi_prot</span> <span class="pre">&lt;data&gt;]</span></code></p>
<p>Description:
It will configure the AXI cache and protections bits.</p>
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt>[axi_cache &lt;data&gt;]</dt><dd><ul class="simple">
<li><p>axi_cache valid range 0 to 15</p></li>
</ul>
</dd>
<dt>[axi_prot &lt;data&gt;]</dt><dd><ul class="simple">
<li><p>axi_prot valid range 0 to 7</p></li>
</ul>
</dd>
</dl>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[xilinx@]# ./xvsecctl -b 0x01 -F 0 -c 1 -q axi_cache 0x1 axi_prot 0x2

MCAP version: 2
axi_cache: 0x1
axi_prot: 0x2
</pre></div>
</div>
</section>
</section>
</section>
</section>


           </div>

          </div>
          <footer>
<!-- Atalwar: Moved the footer code to layout.html to resolve conflict with the Xilinx template -->

</footer>

        </div>
      </div>


	  <!-- Sphinx Page Footer block -->

    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">

        <a href="devguide.html" class="btn btn-neutral float-right" title="Developers Guide" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>


        <a href="build.html" class="btn btn-neutral float-left" title="Building and Installing the XVSEC Driver Software" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>

    </div>


  <hr/>

  <div role="contentinfo" class="copyright">
    <p class="footerinfo">
      <span class="lastupdated">
        Last updated on August 11, 2022.
      </span>

    </p>
  </div>
      </div>
    </section>




  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>








  <!--  Xilinx template footer block -->
							</div>
						</div>
					</div>
				</div>
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="footer parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
								<noindex>
									<footer>
										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">
													<div class="row">
														<div class="footerSocial parbase">
															<div class="col-md-push-6 col-lg-push-6 col-md-6 col-lg-6">
																<ul class="list-inline pull-right social-menu">
																	<li>
																		<a href="https://www.linkedin.com/company/xilinx">
																		<span class="linkedin icon"></span>
																		<span class="sr-only">Connect on LinkedIn</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.twitter.com/XilinxInc">
																		<span class="twitter icon"></span>
																		<span class="sr-only">Follow us on Twitter</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.facebook.com/XilinxInc">
																		<span class="facebook icon"></span>
																		<span class="sr-only">Connect on Facebook</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.youtube.com/XilinxInc">
																		<span class="youtube icon"></span>
																		<span class="sr-only">Watch us on YouTube</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.xilinx.com/registration/subscriber-signup.html">
																		<span class="newsletter icon"></span>
																		<span class="sr-only">Subscribe to Newsletter</span>
																		</a>
																	</li>
																</ul>
															</div>
														</div>
														<div class="col-md-pull-6 col-lg-pull-6 col-md-6 col-lg-6">
															<span class="copyright">

                                  &copy; 2018-2022, Xilinx, Inc
                              </span>
															<ul class="list-inline sub-menu">
																<li>
																	<a href="https://www.xilinx.com/about/privacy-policy.html">Privacy</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/legal.html">Legal</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/contact.html">Contact</a>
																</li>
															</ul>
														</div>
													</div>
												</div>
											</div>
										</div>
									</footer>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="quicklinks parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<noindex>
						<span class="quickLinks">
							<ul>
								<li>
									<a href="#top" class="btn backToTop">
									<span class="fas fa-angle-up" aria-hidden="true"></span>
									</a>
								</li>
							</ul>
						</span>
					</noindex>
				</div>
			</div>
		</div>
		<script>window.CQ = window.CQ || {}</script>
		<script src="https://static.cloud.coveo.com/searchui/v2.4382/js/CoveoJsSearch.Lazy.min.js"></script>
		<script>
			var underscoreSetup = function () {
			  _.templateSettings.interpolate = /\{\{=([^-][\S\s]+?)\}\}/g;
			  _.templateSettings.evaluate = /\{\{([^-=][\S\s]+?)\}\}/g;
			  _.templateSettings.escape = /\{\{-([^=][\S\s]+?)\}\}/g;
			}

			underscoreSetup();
		</script>
	</body>
</html>